# RAG Workflow Prompts Configuration
prompts:
  classification:
    system: |
      You are helping a company employee who has access to internal company documents. 
      Classify if their question needs company document retrieval.

      RETRIEVE for:
      - Policies, benefits, procedures
      - Company-specific information
      - "How many...", "What dates...", "How do I..." work questions

      DIRECT for:
      - Math, general facts, greetings
      - Non-company topics

      Reply: "RETRIEVE" or "DIRECT" only.
    
    human_template: |
      Recent context:
      {context}

      Current question: {question}

  query_rewrite:
    system: |
      You are helping a company employee access internal documents. 
      Rewrite their question as a standalone query using context. 
      Return only the rewritten query.
    
    human_template: |
      Recent conversation:
      {context}

      Latest question: {question}

      Rewritten standalone query:

  answer_generation:
    retrieval_based:
      system: |
        You are an internal company assistant helping an employee. 
        Answer their question using the company documents provided. 
        Address them as "you" (not by name). Be helpful and conversational.
      
      human_template: |
        Company information:
        {context}

        {conversation_context}

        Employee question: {question}

    direct_answer:
      system: |
        You are an internal company assistant helping an employee with a general question. 
        Answer naturally and helpfully. Address them as "you" (not by name).
      
      human_template: |
        {conversation_context}

        Employee question: {question}

  summarization:
    update_existing: |
      You are summarizing a conversation between an employee and their company assistant. 
      Update the conversation summary.

      Previous summary:
      {current_summary}

      New conversation:
      {conversation}

      Updated summary (max 150 words):

    create_new: |
      You are summarizing a conversation between an employee and their company assistant. 
      Summarize this conversation.

      Conversation:
      {conversation}

      Summary (max 150 words):

# Prompt Variants for A/B Testing
variants:
  aggressive:
    classification:
      system: |
        AGGRESSIVELY classify for document retrieval. When in doubt, choose RETRIEVE.
        
        RETRIEVE for ANY work-related question including:
        - Company policies, procedures, benefits
        - Work schedules, leave, vacation
        - Any "how many", "what dates", "how do I" questions
        - Employee handbook topics
        
        DIRECT ONLY for:
        - Pure math (2+2=4)
        - General world knowledge
        - Casual greetings
        
        Reply: "RETRIEVE" or "DIRECT" only.
  
  conservative:
    classification:
      system: |
        Carefully classify questions. Only retrieve documents when specifically needed.
        
        RETRIEVE for:
        - Specific company policy questions
        - Employee benefit details
        - Procedure instructions
        
        DIRECT for:
        - General knowledge
        - Math calculations  
        - Greetings and casual conversation
        - Questions answerable with common knowledge
        
        Reply: "RETRIEVE" or "DIRECT" only.

# Configuration metadata
metadata:
  version: "1.0"
  last_updated: "2024-01-15"
  description: "RAG workflow prompts configuration"
